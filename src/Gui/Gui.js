// https://github.com/g200kg/webaudio-controls/blob/master/webaudio-controls.js
window.WebAudioControlsOptions = {
	useMidi: 1,
	preserveMidiLearn: 1,
}
import '../utils/webaudio-controls.js';
import BufferLoader from './bufferLoader.js';
import SamplePlayer2 from './SamplePlayer.js';
import PresetManager2 from './presets.js';
import NoteSet2 from './NoteSet.js';
import './promptWC.js';

const getBaseURL = () => {
	return new URL('.', import.meta.url);
};

// change relative path to absolute path
function changePathToAbsolute(pathArray) {
	// turn these realtive paths into absolute paths
	pathArray = pathArray.map((url) => {
		if (url.startsWith('http')) {
			//console.log("URL is already absolute, doing nothing url = " + url);
			return url;
		}

		//console.log("Changin url = " + url + " to absolute path");
		if (url === '') return url;

		url = getBaseURL() + url;
		//console.log(url);
		return url;
	});
	return pathArray;
}


// This works when you use a bundler such as rollup
// If you do no wan to use a bundler, then  look at other examples
// that build in pure JS the syles and html template directly
// in the code...


export class MIDI {
	static NOTE_ON = 0x90;
	static NOTE_OFF = 0x80;
	static CC = 0xB0;
}

let style = await fetch(getBaseURL() + 'style.css').then(response => response.text());
let template = await fetch(getBaseURL() + 'template.html').then(response => response.text());

// The GUI is a WebComponent. Not mandatory but useful.
// MANDORY : the GUI should be a DOM node. WebComponents are
// practical as they encapsulate everyhing in a shadow dom
export default class SamplerHTMLElement2 extends HTMLElement {
	// plugin = the same that is passed in the DSP part. It's the instance
	// of the class that extends WebAudioModule. It's an Observable plugin

	static URLs = [];
	static name = [];
	static defaultName = [];

	constructor(plugin) {
		super();
		// SamplerHTMLElement2.factoryPreset1URIs = changePathToAbsolute(SamplerHTMLElement2.factoryPreset1URIs);
		this.root = this.attachShadow({ mode: 'open' });
		this.root.innerHTML = `<style>${style}</style>${template}`;

		// MANDATORY for the GUI to observe the plugin state
		this.plugin = plugin;

		this.plugin.audioNode.gui = this;


		//set control bindings for midi
		this.controlBindings = new Map();

		this.controlBindings.set("volume", 176);
		this.controlBindings.set("pan", 177);
		this.controlBindings.set("tone", 178);
		this.controlBindings.set("pitch", 179);

		//ADSR
		this.controlBindings.set("attack", 180);
		this.controlBindings.set("decay", 181);
		this.controlBindings.set("sustain", 182);
		this.controlBindings.set("release", 183);


		//i have the key i want to log the value of

		// apiKey BUFFA :
		//this.apiKey = 'gWrbi0mUOoh7gaZgxp1Eh5rXB1hZ4UKZ2AnV8nqo';
		// apiKey BOUCLIER :
		//this.apiKey = 'oDL2Gdd0IksB30fuYIPsb3FCAjkhgNb2Vyw2bENg';

		this.apiKey = '';

		this.apiUrl = 'https://freesound.org/apiv2';

		// this.setupMidiListeners(this.plugin.audioNode);

		this.samplePlayers = [];

		this.tempPlayer = [];

		this.presetPage = 0;

		this.explorerSamplePlayers = [];

		this.mousePos = { x: 0, y: 0 };

		this.enableVelocity = false;

		//By default the keyboard touch for typing is enabled
		this.enableKeyboard = true;
		this.enableKeyboardPlay = false;

		// If the prompt menu is no available
		this.promptAvailable = false;

		/*
		console.log("getBaseURL : " + getBaseURL());
		//this.backgroundImageURL = 	getBaseURL() + "./Gui/imgOrange.jpg";
		this.backgroundImageURL = getBaseURL() + "./imgOrange.jpg"
		console.log("this.backgroundImageURL : " + this.backgroundImageURL);
		*/
	}

	handleAnimationFrame = () => {
		if (this.player) {
			this.player.drawOverlays();
		}
		window.requestAnimationFrame(this.handleAnimationFrame);
	}

	connectedCallback() {
		this.setupMidiListeners(this.plugin.audioNode);
		// get the canvas for the waveform
		this.canvas = this.shadowRoot.querySelector('#myCanvas');
		this.canvasOverlay = this.shadowRoot.querySelector('#myCanvasOverlay');
		// get the canvas context
		this.canvasContext = this.canvas.getContext('2d');
		this.canvasContextOverlay = this.canvasOverlay.getContext('2d');

		// add listeners on choiceButtons
		this.setChoiceButtons();

		// add listeners on knobs effects
		this.setKnobs();

		// add listeners on the freesound Explorer
		this.setExplorer();

		// add listeners on the input of ApiKey
		this.setApiKey();

		// add drag and drop for switchpads
		this.setAllDragAndDrop();


		this.setPreset();

		// add listeners on the canvas
		this.addCanvasListeners();

		// add listeners on the keyboard for playing pads
		this.setKeyboardPress();

		// Set background image style to #sampler html element
		//this.setSamplerBackgroundImage();

		// set relative urls to absolute for webaudiocontrol spritesheet images
		this.setWebAudioControlSpritesheetImages();

		//update Midi Note Value on GUI
		this.updateMidiNoteValue();

		this.setVelocity();

		// add listeners on the select presets
		// Check if there is a current state to restore, that could not be restored because the gui was npt built yet
		if (this.plugin.audioNode.stateToRestore) {
			let state = this.plugin.audioNode.stateToRestore;
			//ask GUI to load the preset
			// this.gui.loadCompletePreset(state.presetName);
			this.loadCurrentPreset(state.presetName);
			this.loadCurrentState(state.currentState);

			// remove state to restore
			this.plugin.audioNode.stateToRestore = null;
		}

		for (let i = 3; i >= 0; i--) {
			this.setSwitchPadHandler(i);
		}

	}
	setWebAudioControlSpritesheetImages() {
		console.log("setWebAudioControlSpritesheetImages")
		let switches = this.shadowRoot.querySelectorAll('.switchpad');
		let switchesHandler = this.shadowRoot.querySelectorAll('.switchpadHandler');
		switches.forEach((pad) => {
			let imgUrl = pad.getAttribute("src");
			const absoluteURL = getBaseURL() + imgUrl;
			const imgBase64 = 'data:image/png;base64,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';
			pad.setAttribute("src", imgBase64);
		});
		switchesHandler.forEach((pad) => {
			let imgUrl = pad.getAttribute("src");
			const absoluteURL = getBaseURL() + imgUrl;
			const imgBase64 = 'data:image/png;base64,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'
			pad.setAttribute("src", imgBase64);
		});
	}

	setSamplerBackgroundImage() {
		let samplerDiv = this.shadowRoot.querySelector('#sampler');
		samplerDiv.style.backgroundImage = "url(" + this.backgroundImageURL + ")";
		//samplerDiv.style.background = "red";
	}

	addCanvasListeners() {
		this.canvasOverlay.onmousemove = (evt) => {
			let rect = this.canvas.getBoundingClientRect();

			this.mousePos.x = (evt.clientX - rect.left);
			this.mousePos.y = (evt.clientY - rect.top);

			if (this.player) {
				this.player.highLightTrimBarsWhenClose(this.mousePos);
			}
		}

		this.canvasOverlay.onmousedown = (evt) => {
			if (this.player) {
				this.player.selectTrimbars();
			}
		}

		this.canvasOverlay.onmouseup = (evt) => {
			if (this.player) {
				this.player.releaseTrimBars();
			}
		}

		this.canvasOverlay.onmouseout = (evt) => {
			if (this.player) {
				this.player.releaseTrimBarsOnMouseOut();
			}
		}
	}

	setKnobs() {
		const effectKnobs = this.shadowRoot.querySelectorAll('.knob');
		effectKnobs.forEach((effectKnob) => { effectKnob.classList.add('element-disabled') });

		this.shadowRoot.querySelector('#knob1').addEventListener('input', (e) => {
			//this.plugin.audioNode.setParamsValues({ volumeGain: e.target.value });

			if (this.player == undefined) return;

			this.player.effects.volumeGain = parseFloat(e.target.value);

		});

		this.shadowRoot.querySelector('#knob2').addEventListener('input', (e) => {
			//this.plugin.audioNode.setParamsValues({ pan: e.target.value });

			if (this.player == undefined) return;

			this.player.effects.pan = parseFloat(e.target.value);


		});



		this.shadowRoot.querySelector('#knob3').addEventListener('input', (e) => {
			//this.plugin.audioNode.setParamsValues({ tone: e.target.value });

			if (this.player == undefined) return;

			this.player.effects.tone = parseFloat(e.target.value);

		});

		this.shadowRoot.querySelector('#knobPitch').addEventListener('input', (e) => {
			if (this.player == undefined) return;
			this.player.semitones = parseInt(e.target.value);
		})

		//button reverse
		const btnReverse = this.shadowRoot.querySelector('#reverse');
		btnReverse.disabled = true;
		btnReverse.classList.add('element-disabled');
		btnReverse.addEventListener('click', (e) => {
			if (this.player == undefined) return;

			const reverseSoundBuffer = this.player.reverseSound(this.player.decodedSound);
			this.player.reversed = !this.player.reversed;

			this.player.decodedSound = reverseSoundBuffer;
			this.player.drawWaveform();

			this.player.reversed ? btnReverse.classList.add('choose') : btnReverse.classList.remove('choose');
		});


		//ADSR enveloppe

		//enable ADSR;
		const envBtn = this.shadowRoot.querySelector('#envBtn');
		const envKnobs = this.shadowRoot.querySelectorAll('.knobEnv');
		//disable all knobs
		envKnobs.forEach((envKnob) => { envKnob.classList.add('element-disabled') });
		envBtn.disabled = true;
		envBtn.classList.add('element-disabled');
		envBtn.addEventListener('click', (e) => {
			if (this.player == undefined) return;
			if (!this.player.enableAdsr) {
				envBtn.innerHTML = "Disable";
				this.player.enableAdsr = true;
				envBtn.classList.add('choose');
				envKnobs.forEach((envKnob) => { envKnob.classList.remove('element-disabled') });
			}
			else {
				envBtn.innerHTML = "Enable";
				this.player.enableAdsr = false;
				envBtn.classList.remove('choose');
				envKnobs.forEach((envKnob) => { envKnob.classList.add('element-disabled') });
			}
		});

		//attack
		this.shadowRoot.querySelector("#knobAttack").addEventListener('input', (e) => {
			if (this.player == undefined) return;
			this.player.effects.attackValue = parseFloat(e.target.value);
		});

		//decay
		this.shadowRoot.querySelector("#knobDecay").addEventListener('input', (e) => {
			if (this.player == undefined) return;
			this.player.effects.decayValue = parseFloat(e.target.value);
		});

		//sustain
		this.shadowRoot.querySelector("#knobSustain").addEventListener('input', (e) => {
			if (this.player == undefined) return;
			this.player.effects.sustainValue = parseFloat(e.target.value);
		});

		//release
		this.shadowRoot.querySelector("#knobRelease").addEventListener('input', (e) => {
			if (this.player == undefined) return;
			this.player.effects.releaseValue = parseFloat(e.target.value);
		});

	}

	//initialize knobs values
	initKnobs() {
		const effectKnobs = this.shadowRoot.querySelectorAll('.knob');
		effectKnobs.forEach((effectKnob) => { effectKnob.classList.add('element-disabled') });

		const btnReverse = this.shadowRoot.querySelector('#reverse');
		btnReverse.disabled = true;
		btnReverse.classList.remove('choose');

		//ADSR;
		const envBtn = this.shadowRoot.querySelector('#envBtn');
		const envKnobs = this.shadowRoot.querySelectorAll('.knobEnv');
		//disable all env knobs
		envKnobs.forEach((envKnob) => { envKnob.classList.add('element-disabled') });
		envBtn.disabled = true;
		envBtn.classList.remove('choose');

		this.shadowRoot.querySelector('#knob1').value = 0.5;
		this.shadowRoot.querySelector('#knob2').value = 0;
		this.shadowRoot.querySelector('#knob3').value = 0;
		this.shadowRoot.querySelector('#knobPitch').value = 0;
		this.shadowRoot.querySelector('#knobAttack').value = 0.2;
		this.shadowRoot.querySelector('#knobDecay').value = 0.2;
		this.shadowRoot.querySelector('#knobSustain').value = 1;
		this.shadowRoot.querySelector('#knobRelease').value = 0.3;
	}

	setChoiceButtons() {
		const knob = this.shadowRoot.querySelector('#choiceKnobs');
		const explorer = this.shadowRoot.querySelector('#choiceExplorer');
		const MIDI = this.shadowRoot.querySelector('#choiceMIDI');

		const divKnob = this.shadowRoot.querySelector('#knobs');
		const divExplorer = this.shadowRoot.querySelector('#explorer');
		const divMIDI = this.shadowRoot.querySelector('#MIDI');

		explorer.classList.add('choose');

		divKnob.style.display = 'none';
		divExplorer.style.display = 'inline-block';
		divMIDI.style.display = 'none';


		knob.addEventListener('click', (e) => {
			divKnob.style.display = 'grid';
			divExplorer.style.display = 'none';
			divMIDI.style.display = 'none';

			knob.classList.add('choose');
			explorer.classList.remove('choose');
			MIDI.classList.remove('choose');
		});

		explorer.addEventListener('click', (e) => {
			divKnob.style.display = 'none';
			divExplorer.style.display = 'inline-block';
			divMIDI.style.display = 'none';

			knob.classList.remove('choose');
			explorer.classList.add('choose');
			MIDI.classList.remove('choose');
		});

		MIDI.addEventListener('click', (e) => {
			divKnob.style.display = 'none';
			divExplorer.style.display = 'none';
			divMIDI.style.display = 'flex';

			knob.classList.remove('choose');
			explorer.classList.remove('choose');
			MIDI.classList.add('choose');
		});
	}

	setApiKey() {
		const apiKeyInput = this.shadowRoot.querySelector('#apiKey');
		const save = this.shadowRoot.querySelector('#apiKeyButton');

		// Get the API key from the localStorage
		if (localStorage.getItem('apiKey') != null) {
			this.apiKey = localStorage.getItem('apiKey');
			apiKeyInput.value = this.apiKey;
			save.classList.add('saved');
		}


		apiKeyInput.addEventListener('focus', (e) => {
			save.classList.remove('saved');
			//disable keyboard events for playin pads
			this.enableKeyboard = false;
		});

		//add listeners on keyboard for typing api key
		apiKeyInput.addEventListener('blur', (e) => {
			this.enableKeyboard = true;
			this.shadowRoot.querySelector('#sampler').focus();
		});

		// click on save button when press enter
		apiKeyInput.addEventListener('keyup', (e) => {
			if (e.code === 'Enter') {
				this.enableKeyboard = true;
				save.click();
				save.classList.add('saved');
				apiKeyInput.blur();
			}
		});

		save.addEventListener('click', (e) => {
			this.apiKey = apiKeyInput.value;

			// add the API key to the localStorage
			localStorage.setItem('apiKey', this.apiKey);

			save.classList.add('saved');
		});
	}

	setLabel(index, b, defaultName) {
		const label = this.shadowRoot.querySelector('#labelSampleName');
		const input = this.shadowRoot.querySelector('#inputSampleName');
		const buttonText = b.querySelector('.button_text');

		if (buttonText) {
			label.textContent = buttonText.textContent;
		}
		else {
			label.textContent = b.textContent;
		}

		label.style.cursor = 'pointer';


		if (!b) {
			label.ondblclick = () => {
				return;
			}
		}
		else {

			if (b.classList.contains('selected') && ((b.classList.contains('resultButton')) || (b.nodeName === 'WEBAUDIO-SWITCH2'))) {

				label.ondblclick = () => {
					if (!b.classList.contains('selected')) return;
					label.style.display = 'none';
					input.value = label.textContent;
					input.style.display = 'inline-block';
					input.style.outline = "none";
					input.focus();
				}

				input.onblur = () => {
					label.textContent = input.value;
					if (b.classList.contains('resultButton')) {
						if (label.textContent == "") label.textContent = defaultName;
						b.textContent = label.textContent;
					} else if (b.nodeName === 'WEBAUDIO-SWITCH2') {
						if (label.textContent == "") {
							label.textContent = SamplerHTMLElement2.defaultName[index];
						}
						SamplerHTMLElement2.name[index] = label.textContent;
						const currentButtonText = b.querySelector('.button_text');
						currentButtonText.innerHTML = SamplerHTMLElement2.name[index];
					}
					label.style.display = "inline-block";
					input.style.display = "none";
					this.enableKeyboard = true;
					//focus on the sampler element for event keyboard
					this.shadowRoot.querySelector('#sampler').focus();
				}

				input.addEventListener('focus', (e) => {
					this.enableKeyboard = false;
					// if we press enter, we save the name
					input.addEventListener('keyup', (e) => {
						if (e.code === 'Enter') {
							this.enableKeyboard = true;
							input.blur();
						}
					});
				});
			}
		}

	}


	setExplorer() {
		const search = this.shadowRoot.querySelector('#search');
		const searchButton = this.shadowRoot.querySelector('#searchButton');
		const time = this.shadowRoot.querySelector('#timeRange');
		const results = this.shadowRoot.querySelector('#results');
		const next = this.shadowRoot.querySelector('#nextPage');
		const previous = this.shadowRoot.querySelector('#previousPage');

		next.disabled = true;
		previous.disabled = true;

		// disable keyboard events for playin pads
		search.addEventListener('focus', (e) => {
			this.enableKeyboard = false;
		});

		// add listeners on keyboard for typing 
		search.addEventListener('blur', (e) => {
			this.enableKeyboard = true;
			this.shadowRoot.querySelector('#sampler').focus();
		});

		let option = "";
		let numPage = 1;

		time.innerHTML = 5;
		time.value = 5;

		// add time options from 1 to 5 seconds
		for (let i = 1; i <= 5; i++) {
			option = document.createElement('option');
			option.value = i;
			option.innerHTML = '< ' + i + 's';
			time.appendChild(option);
		}

		// add time options from 10 to 20 seconds
		for (let i = 10; i <= 20; i += 5) {
			option = document.createElement('option');
			option.value = i;
			option.innerHTML = '< ' + i + 's';
			time.appendChild(option);
		}

		// add time option for unlimited duration
		option = document.createElement('option');
		option.value = 'unlimited';
		option.innerHTML = 'all';
		time.appendChild(option);

		// add listeners on next and previous buttons
		next.addEventListener('click', (e) => {
			numPage++;
			searchButton.click();
		});

		previous.addEventListener('click', (e) => {
			if (numPage > 1) {
				numPage--;
				searchButton.click();
			}
		});

		// click on search button when press enter
		search.addEventListener('keyup', (e) => {
			if (e.code === 'Enter') {
				this.enableKeyboard = true;
				searchButton.click();
				search.blur();
			}
		});



		searchButton.addEventListener('click', (e) => {

			next.disabled = true;
			previous.disabled = true;

			searchButton.disabled = true;
			searchButton.classList.remove('error');
			searchButton.innerHTML = 'Searching...';

			results.classList.remove('error');
			results.innerHTML = '';

			this.stopAllSoundsExplorer();
			this.explorerSamplePlayers = [];
			let arrayOfSoundObjectURLs = [];

			this.getSounds(search.value, numPage).then((arrayOfSoundIds) => {

				arrayOfSoundIds.map((soundObject, index) => {
					const id = soundObject[0];
					const name = soundObject[1];
					const urlOfSoundObject = `${this.apiUrl}/sounds/${id}/?token=${this.apiKey}`;

					arrayOfSoundObjectURLs.push(urlOfSoundObject);
				});

				// use Promise.all to get all the sound objects
				Promise.all(arrayOfSoundObjectURLs.map(url => fetch(url)))
					.then(responses => Promise.all(responses.map(res => res.json())))
					.then(soundObjects => {
						// use Promise.all to get all the sound previews as mp3 files
						const arrayOfSoundPreviews = soundObjects.map(soundObject => soundObject.previews['preview-hq-mp3']);

						arrayOfSoundPreviews.forEach((soundPreview, index) => {
							this.setResultSound(index, arrayOfSoundIds[index][1], arrayOfSoundPreviews[index]);
						});

						let bl = new BufferLoader(this.plugin.audioContext, arrayOfSoundPreviews, this.shadowRoot, (bufferList) => {
							// when all sounds are loaded, we store them in an array
							this.decodedSounds = bufferList;
							this.explorerDecodedSounds = bufferList;

							// For each sounds we create a SamplePlayer
							this.decodedSounds.forEach((decodedSound, index) => {

								this.explorerSamplePlayers[index] = new SamplePlayer2(this.plugin.audioContext, this.canvas, this.canvasOverlay, "orange", decodedSound, this.plugin.audioNode, 0);

								const b = this.shadowRoot.querySelector('#result' + index);

								// add the class 'set' to the button
								b.classList.add('set');
								// add draggable attribute to the button for drag and drop events
								b.setAttribute('draggable', 'true');

								window.requestAnimationFrame(this.handleAnimationFrame);
							});
						});

						bl.loadExplorer();

						if (!searchButton.classList.contains('error')) {
							searchButton.textContent = 'Search';
						}
						else {
							searchButton.textContent = 'Error';
						}
						next.disabled = false;
						if (numPage > 1) {
							previous.disabled = false;
						}
						searchButton.disabled = false;
					});
			});
		});
	}




	getSounds(queryText, nbPage) {

		let time = this.shadowRoot.querySelector('#timeRange').value;
		const searchButton = this.shadowRoot.querySelector('#searchButton');
		const results = this.shadowRoot.querySelector('#results');

		let url = '';

		if (time === 'unlimited') {
			url = `${this.apiUrl}/search/text/?query=${queryText}&token=${this.apiKey}&page_size=9&page=${nbPage}`;
		}
		else {
			url = `${this.apiUrl}/search/text/?query=${queryText}&token=${this.apiKey}&page_size=9&page=${nbPage}&filter=duration:[0.0 TO ${time}.0]`;
		}

		const xhr = new XMLHttpRequest();
		xhr.open('GET', url);
		xhr.responseType = 'json';

		return new Promise((resolve, reject) => {
			xhr.onreadystatechange = () => {
				if (xhr.readyState === 4) {
					if (xhr.status === 200) {
						const arrayOfSoundIdsAndNames = xhr.response.results.map(sound => [sound.id, sound.name]);
						resolve(arrayOfSoundIdsAndNames);
					}
					else if (xhr.status === 401) {
						if (!searchButton.classList.contains('error')) {
							searchButton.classList.add('error');
							searchButton.textContent = 'Error';
						}
						searchButton.disabled = false;

						results.classList.add('error');
						results.innerHTML = 'Unauthorized : ' + xhr.response.detail + '<br><br>Please check your API key.';
						reject(new Error('Unauthorized : ' + xhr.response.detail));
					}
					else if (xhr.status === 404) {
						if (!searchButton.classList.contains('error')) {
							searchButton.classList.add('error');
							searchButton.textContent = 'Error';
						}
						searchButton.disabled = false;

						results.classList.add('error');
						results.innerHTML = 'Sounds not found : ' + xhr.response.detail;
						reject(new Error('Sounds not found : ' + xhr.response.detail));
					}
					else if (xhr.status === 429) {
						if (!searchButton.classList.contains('error')) {
							searchButton.classList.add('error');
							searchButton.textContent = 'Error';
						}
						searchButton.disabled = false;

						results.classList.add('error');
						results.innerHTML = 'Too many requests : ' + xhr.response.detail;
						reject(new Error('Too many requests : ' + xhr.response.detail));
					}
					else {
						if (!searchButton.classList.contains('error')) {
							searchButton.classList.add('error');
							searchButton.textContent = 'Error';
						}
						searchButton.disabled = false;

						results.classList.add('error');
						results.innerHTML = 'Failed to get sounds : ' + xhr.response.detail;
						reject(new Error('Failed to get sounds : ' + xhr.response.detail));
					}
				}
			};
			xhr.send();
		});
	}

	setAllDragAndDrop() {

		this.shadowRoot.querySelectorAll('.switchpad').forEach((b) => {
			//b.setAttribute('draggable', true);

			b.addEventListener('dragstart', (e) => {
				e.stopPropagation();
				e.dataTransfer.setData('id', e.target.id);
			});

			b.addEventListener('dragover', (e) => {
				e.stopPropagation();
				e.preventDefault();
			});

			b.addEventListener('dragmove', (e) => {
				e.preventDefault();
			});

			b.addEventListener('drop', (e) => {
				e.preventDefault();
				e.stopPropagation();
				let btnTargetId;

				btnTargetId = e.target.id;

				const dropIndex = btnTargetId;
				const dragIndex = e.dataTransfer.getData('id');
				const dropUrl = e.dataTransfer.getData('url');

				if (dragIndex.startsWith('switchpad')) {
					if (dragIndex != dropIndex) {
						this.swapSample(dragIndex, dropIndex);
					}
				}
				else if (dragIndex.startsWith('result')) {
					this.addSampleToPad(dragIndex, dropIndex, dropUrl);
				}
			});

			b.addEventListener('dragend', (e) => {
				let target = e.target;
				if (!e.target.classList.contains('switchpad'))
					target = e.target.parentNode;
				target.setValue(0, true);
				e.preventDefault();
			});
		});


	}

	swapSample = (index1, index2) => {
		// we get the index number
		const numberRegex = /\d+/g;
		if (typeof index1 === "string" && typeof index2 === "string") {
			index1 = index1.match(numberRegex)[0];
			index2 = index2.match(numberRegex)[0];
		}

		if (index1 === index2) return;

		const div1 = this.shadowRoot.querySelector('#p' + index1);
		const div2 = this.shadowRoot.querySelector('#p' + index2);

		// remove the button delete if it exists
		if (div1.querySelector('.deleteSample')) {
			div1.querySelector('.deleteSample').remove();
		}

		if (div2.querySelector('.deleteSample')) {
			div2.querySelector('.deleteSample').remove();
		}

		// set the correct id
		div1.querySelector('.switchpad').id = 'switchpad' + index1;
		div2.querySelector('.switchpad').id = 'switchpad' + index2;

		const button1 = this.shadowRoot.querySelector('#switchpad' + index1);
		const button2 = this.shadowRoot.querySelector('#switchpad' + index2);

		if (!button1.classList.contains('selected')) return;


		//swap progress bar
		const progressPad1 = div1.querySelector('#progress' + index1);
		const progressPad2 = div2.querySelector('#progress' + index2);
		const clonedProgress1 = progressPad1.cloneNode(true);
		const clonedProgress2 = progressPad2.cloneNode(true);
		div1.replaceChild(clonedProgress2, progressPad1);
		div2.replaceChild(clonedProgress1, progressPad2);
		div1.querySelector('.padprogress').id = 'progress' + index1;
		div2.querySelector('.padprogress').id = 'progress' + index2;
		let tempIndex1 = Number(index1) + 16 * this.presetPage;
		let tempIndex2 = Number(index2) + 16 * this.presetPage;
		if (SamplerHTMLElement2.URLs[tempIndex2] === undefined) {
			SamplerHTMLElement2.URLs[tempIndex2] = '';
		}
		if (SamplerHTMLElement2.URLs[tempIndex1] === undefined) {
			SamplerHTMLElement2.URLs[tempIndex1] = '';
		}

		if (SamplerHTMLElement2.name[tempIndex2] === undefined) {
			SamplerHTMLElement2.name[tempIndex2] = '';
		}
		if (SamplerHTMLElement2.name[tempIndex1] === undefined) {
			SamplerHTMLElement2.name[tempIndex1] = '';
		}

		//Swap urls
		const tempURL = SamplerHTMLElement2.URLs[tempIndex1];
		SamplerHTMLElement2.URLs[tempIndex1] = SamplerHTMLElement2.URLs[tempIndex2];
		SamplerHTMLElement2.URLs[tempIndex2] = tempURL;

		//Swap names
		const tempName = SamplerHTMLElement2.name[tempIndex1];
		SamplerHTMLElement2.name[tempIndex1] = SamplerHTMLElement2.name[tempIndex2]
		SamplerHTMLElement2.name[tempIndex2] = tempName;

		//Swap default names
		const tempDefaultName = SamplerHTMLElement2.defaultName[tempIndex1];
		SamplerHTMLElement2.defaultName[tempIndex1] = SamplerHTMLElement2.defaultName[tempIndex2];
		SamplerHTMLElement2.defaultName[tempIndex2] = tempDefaultName;

		// Swap SamplePlayers
		const tempPlayer = this.samplePlayers[tempIndex1];
		this.samplePlayers[tempIndex1] = this.samplePlayers[tempIndex2];
		this.samplePlayers[tempIndex2] = tempPlayer;

		if (!button1.querySelector(".button_text")) {
			const buttonText = document.createElement("p");
			buttonText.classList.add("button_text");
			buttonText.id = "button_text" + tempIndex1;
			button1.innerHTML = "";
			button1.appendChild(buttonText);
		}

		if (!button2.querySelector(".button_text")) {
			const buttonText = document.createElement("p");
			buttonText.classList.add("button_text");
			buttonText.id = "button_text" + tempIndex2;
			button2.innerHTML = "";
			button2.appendChild(buttonText);
		}

		if (!button1.classList.contains('set')) {
			this.setSwitchPad(tempIndex1);
			button1.classList.remove('selected');
		}

		if (!button2.classList.contains('set')) {
			this.setSwitchPad(tempIndex2);
			this.setLabel(tempIndex2, button2);
			button2.classList.add('selected');
		}


		this.setDefaultPadKeyValue(index1);
		this.setDefaultPadKeyValue(index2);

	}

	addSampleToPad = (index1, index2, url) => {

		this.stopAllSoundsExplorer();

		//get the index number
		const numberRegex = /\d+/g;
		index1 = index1.match(numberRegex)[0];
		index2 = index2.match(numberRegex)[0];

		const div1 = this.shadowRoot.querySelector('#resultExplorer' + index1);
		const div2 = this.shadowRoot.querySelector('#p' + index2);

		const padElement = div2.children[0].tagName;

		if (div2.querySelector('.deleteSample')) {
			div2.querySelector('.deleteSample').remove();
		}

		const button = div1.querySelector('.resultButton');

		//clone progress bar
		const progressExplorer = div1.querySelector('.progressExplorer');
		const progressPad = div2.querySelector('.padprogress');
		const newProgressPad = progressExplorer.cloneNode(true);
		div2.replaceChild(newProgressPad, progressPad);
		newProgressPad.classList.replace('progressExplorer', 'padprogress');
		newProgressPad.id = 'progress' + index2;

		let tempIndex1 = Number(index1) + 16 * this.presetPage;
		let tempIndex2 = Number(index2) + 16 * this.presetPage;

		// get the url of the sound back
		SamplerHTMLElement2.URLs[tempIndex2] = url;

		// get the name of the sound back
		SamplerHTMLElement2.name[tempIndex2] = button.innerHTML;
		SamplerHTMLElement2.defaultName[tempIndex2] = button.innerHTML;

		//recreate a new SamplePlayer independant of the explorer
		this.samplePlayers[tempIndex2] = new SamplePlayer2(this.plugin.audioContext, this.canvas, this.canvasOverlay, "orange", this.explorerDecodedSounds[tempIndex1], this.plugin.audioNode, 0);

		// set pads
		if (padElement === 'WEBAUDIO-SWITCH2') {
			this.setSwitchPad(index2);
			const padBtn = this.shadowRoot.querySelector('#switchpad' + index2);
			this.setLabel(index2, padBtn);

			//Remove selected class from all switchpad
			const switchPads = this.shadowRoot.querySelectorAll('.switchpad');
			switchPads.forEach((switchPad) => {
				switchPad.classList.remove('selected');
			});

			padBtn.classList.add('selected');
		}

		// update player
		this.player = this.samplePlayers[tempIndex2];
		this.shadowRoot.querySelector('#labelSampleName').innerHTML = button.innerHTML;
		this.player.drawWaveform();

		//set default keyboard value for playing pads
		this.setDefaultPadKeyValue(index2);
	}


	stopAllSoundsPads = () => {
		for (let i = 0; i < this.samplePlayers.length; i++) {
			if (this.samplePlayers[i] != null) {
				this.samplePlayers[i].stop();
				if (this.samplePlayers[i].classList && this.samplePlayers[i].classList.contains('selected')) this.samplePlayers[i].classList.remove('selected');
			}
		}
	}

	stopAllSoundsExplorer = () => {
		for (let i = 0; i < this.explorerSamplePlayers.length; i++) {
			if (this.explorerSamplePlayers[i] != null) {
				this.explorerSamplePlayers[i].stop();
				// this.exporterSamplePLayers[i].classList.remove('selected');
			}
		}
	}


	setResultSound = (index, name, url) => {
		// add a div resultExplorer for each sound
		const div = document.createElement('div');
		div.classList.add('resultExplorer');
		div.id = 'resultExplorer' + index;
		this.shadowRoot.querySelector('#results').appendChild(div);

		// add a button for each sound
		const b = document.createElement('button');
		b.classList.add('resultButton');
		b.id = 'result' + index;
		let defaultName = name;
		b.innerHTML = name;
		b.addEventListener('click', (e) => {
			// if the sound is loaded
			if (this.explorerSamplePlayers[index] != null) {
				this.stopAllSoundsPads();
				this.stopAllSoundsExplorer();

				this.player = this.explorerSamplePlayers[index];
				this.shadowRoot.querySelector('#labelSampleName').innerHTML = b.innerHTML.split('<')[0];
				this.player.drawWaveform();
				this.player.play();
				b.classList.add('active');
				setTimeout(() => {
					b.classList.remove('active');
				}, 100);

				// remove the class 'selected' from all the buttons
				const buttons = this.shadowRoot.querySelectorAll('.padbutton');
				buttons.forEach((button) => {
					button.classList.remove('selected');
				});

				//Remove selected class from all switchpad
				const switchPads = this.shadowRoot.querySelectorAll('.switchpad');
				switchPads.forEach((switchPad) => {
					switchPad.classList.remove('selected');
				});

				// remove the class 'selected' from all the buttons of the explorer
				const buttonsExplorer = this.shadowRoot.querySelectorAll('.resultButton');
				buttonsExplorer.forEach((button) => {
					button.classList.remove('selected');
				});

				//Disable create NoteSet
				this.shadowRoot.querySelector('#createNoteSet').disabled = true;
				this.shadowRoot.querySelector('#createNoteSet').classList.add('element-disabled');

				// add the class 'selected' to the button
				b.classList.add('selected');

				this.setLabel(index, b, defaultName);
			}
		});

		b.addEventListener('dragstart', (e) => {
			e.dataTransfer.setData('id', e.target.id);
			e.dataTransfer.setData('url', url);
		});

		b.addEventListener('dragover', (e) => {
			e.preventDefault();
		});

		b.addEventListener('dragend', (e) => {
			e.preventDefault();
		});

		// add the button to the div
		this.shadowRoot.querySelector('#resultExplorer' + index).appendChild(b);

		// add a progress bar for each sound
		const progressExplorer = document.createElement('progress');
		progressExplorer.classList.add('progressExplorer');
		progressExplorer.id = 'progressExplorer' + index;
		progressExplorer.value = 0;
		progressExplorer.max = 1;
		this.shadowRoot.querySelector('#resultExplorer' + index).appendChild(progressExplorer);
	}

	setDefaultPadsKeyValue() {
		const switchPads = this.shadowRoot.querySelectorAll('.switchpad');
		for (let i = 0; i < switchPads.length; i++) {
			const switchPad = this.shadowRoot.querySelector('#switchpad' + i)
			if (switchPad.querySelector('.button_key_text')) return;
			const buttonKeyValue = document.createElement('div');
			buttonKeyValue.classList.add('button_key_text');
			buttonKeyValue.id = 'button_key_text' + i;
			const keyArr = ['W/Z', 'X', 'C', 'V', 'Q/A', 'S', 'D', 'F', 'A/Q', 'Z/W', 'E', 'R', '1', '2', '3', '4'];
			buttonKeyValue.innerHTML = keyArr[i];
			switchPad.appendChild(buttonKeyValue);
		}
	}

	setDefaultPadKeyValue(index) {
		const switchPad = this.shadowRoot.querySelector('#switchpad' + index % 16)
		const buttonKeyValue = document.createElement('div');
		if (switchPad.querySelector('.button_key_text')) return;
		buttonKeyValue.classList.add('button_key_text');
		buttonKeyValue.id = 'button_key_text' + index % 16;
		const keyArr = ['W/Z', 'X', 'C', 'V', 'Q/A', 'S', 'D', 'F', 'A/Q', 'Z/W', 'E', 'R', '1', '2', '3', '4'];
		buttonKeyValue.innerHTML = keyArr[index % 16];
		switchPad.appendChild(buttonKeyValue);
	}

	setMidiNoteName(index, noteValue, noteName) {
		if (!noteValue) return;
		const switchPad = this.shadowRoot.querySelector('#switchpad' + index);
		const PadMidiNoteValue = document.createElement('div');
		PadMidiNoteValue.classList.add('button_midi_note');
		PadMidiNoteValue.id = 'button_midi_note' + index;

		//convert midi note value to midi note name
		const midiNotes = ['A0', 'A#0', 'B0', 'C1', 'C#1', 'D1', 'D#1', 'E1', 'F1', 'F#1', 'G1', 'G#1',
			'A1', 'A#1', 'B1', 'C2', 'C#2', 'D2', 'D#2', 'E2', 'F2', 'F#2', 'G2', 'G#2',
			'A2', 'A#2', 'B2', 'C3', 'C#3', 'D3', 'D#3', 'E3', 'F3', 'F#3', 'G3', 'G#3',
			'A3', 'A#3', 'B3', 'C4', 'C#4', 'D4', 'D#4', 'E4', 'F4', 'F#4', 'G4', 'G#4',
			'A4', 'A#4', 'B4', 'C5', 'C#5', 'D5', 'D#5', 'E5', 'F5', 'F#5', 'G5', 'G#5',
			'A5', 'A#5', 'B5', 'C6', 'C#6', 'D6', 'D#6', 'E6', 'F6', 'F#6', 'G6', 'G#6',
			'A6', 'A#6', 'B6', 'C7', 'C#7', 'D7', 'D#7', 'E7', 'F7', 'F#7', 'G7', 'G#7',
			'A7', 'A#7', 'B7', 'C8', 'C#8', 'D8', 'D#8', 'E8', 'F8', 'F#8', 'G8', 'G#8',
			'A8', 'A#8', 'B8', 'C9', 'C#9', 'D9', 'D#9', 'E9', 'F9', 'F#9', 'G9', 'G#9',];
		//A0 = 21
		let newNoteValue = noteValue - 21;
		if (!noteName) {
			noteName = midiNotes[newNoteValue];
		}
		PadMidiNoteValue.innerHTML = noteName;
		if (!switchPad.querySelector('.button_midi_note')) {
			switchPad.appendChild(PadMidiNoteValue);
		} else {
			switchPad.replaceChild(PadMidiNoteValue, switchPad.querySelector('.button_midi_note'));
		}
	}

	setNoteValue(index, noteName) {
		const switchPad = this.shadowRoot.querySelector('#switchpad' + index);
		//convert midi note name to midi note value
		const midiNotes = ['A0', 'A#0', 'B0', 'C1', 'C#1', 'D1', 'D#1', 'E1', 'F1', 'F#1', 'G1', 'G#1',
			'A1', 'A#1', 'B1', 'C2', 'C#2', 'D2', 'D#2', 'E2', 'F2', 'F#2', 'G2', 'G#2',
			'A2', 'A#2', 'B2', 'C3', 'C#3', 'D3', 'D#3', 'E3', 'F3', 'F#3', 'G3', 'G#3',
			'A3', 'A#3', 'B3', 'C4', 'C#4', 'D4', 'D#4', 'E4', 'F4', 'F#4', 'G4', 'G#4',
			'A4', 'A#4', 'B4', 'C5', 'C#5', 'D5', 'D#5', 'E5', 'F5', 'F#5', 'G5', 'G#5',
			'A5', 'A#5', 'B5', 'C6', 'C#6', 'D6', 'D#6', 'E6', 'F6', 'F#6', 'G6', 'G#6',
			'A6', 'A#6', 'B6', 'C7', 'C#7', 'D7', 'D#7', 'E7', 'F7', 'F#7', 'G7', 'G#7',
			'A7', 'A#7', 'B7', 'C8', 'C#8', 'D8', 'D#8', 'E8', 'F8', 'F#8', 'G8', 'G#8',
			'A8', 'A#8', 'B8', 'C9', 'C#9', 'D9', 'D#9', 'E9', 'F9', 'F#9', 'G9', 'G#9',];
		const noteValue = midiNotes.indexOf(noteName) + 21;
		this.setMidiNoteName(index, noteValue, noteName);
		switchPad.midiController.cc = noteValue;
		switchPad.midiController.channel = 0;
	}

	updateMidiNoteValue(noteValue) {
		const preset = this.shadowRoot.querySelector('#selectPreset').value;
		let menu = document.getElementById("webaudioctrl-context-menu");
		let stockMidiLearn = localStorage.getItem("WebAudioControlsMidiLearn");
		let listMidiLearn = JSON.parse(stockMidiLearn);

		//if pad is learning....
		if (menu.knob && menu.knob.checked) {
			//if another pad has already this midi note value, remove the previous midi learn
			if (listMidiLearn.find(element => element.cc.cc === noteValue)) {
				let filterList = listMidiLearn.filter(element => element.cc.cc === noteValue);
				let filterListPresets;
				//if there is more than one pad with this midi note value or if the pad is already assigned to this midi note value, remove the previous midi learn
				if (filterList.length > 1) {
					filterList = filterList.filter(element => element.id != menu.knob.id);
					filterList.map(element => { element.cc = {} });
					const switchPadsId = filterList.map(element => element.id);
					const switchPads = switchPadsId.map(element => this.shadowRoot.querySelector('#' + element));
					switchPads.forEach((switchPad) => {
						switchPad.midiController = {};
						if (switchPad.querySelector('.button_midi_note')) {
							switchPad.querySelector('.button_midi_note').remove();
						}
						switchPad.setValue(0);
					});
				}
				localStorage.setItem("WebAudioControlsMidiLearn", JSON.stringify(listMidiLearn));
			}
		}
		menu.onclick = (e) => {
			const switchPad = menu.knob.id;
			const switchPadNote = menu.knob.midiController.cc;
			//get current Preset
			const preset = this.shadowRoot.querySelector('#selectPreset').value;

			let stockMidiLearn = localStorage.getItem("WebAudioControlsMidiLearn");
			let listMidiLearn = JSON.parse(stockMidiLearn);

			if (!listMidiLearn) return;

			if (!switchPadNote) {
				if (menu.knob.querySelector('.button_midi_note')) {
					menu.knob.querySelector('.button_midi_note').remove();
				}
			}
		};

		this.clearAllMidiLearning();
		this.resetAllMidiLearning();
		const defaultMidiLearnBtn = this.shadowRoot.querySelector('#defaultMidiLearn');
		defaultMidiLearnBtn.onclick = () => {
			let manualClick = true;
			this.defaultMidiMapping(manualClick);
		}
	}

	clearAllMidiLearning() {
		const clearBtn = this.shadowRoot.querySelector('#clearMidiLearn');
		clearBtn.onclick = () => {
			const switchpads = this.shadowRoot.querySelectorAll('.switchpad');
			switchpads.forEach((switchpad) => {
				switchpad.midiController = {};
				if (switchpad.querySelector('.button_midi_note')) {
					switchpad.querySelector('.button_midi_note').remove();
				}
			});
			let stockMidiLearn = localStorage.getItem("WebAudioControlsMidiLearn");
			let listMidiLearn = JSON.parse(stockMidiLearn);
			listMidiLearn.map(element => { element.cc = {} });
			localStorage.setItem("WebAudioControlsMidiLearn", JSON.stringify(listMidiLearn));
		};
	}

	resetAllMidiLearning() {
		//if there is a preset saved with midi learns, reset all midi learns to the swtichpads
		const resetBtn = this.shadowRoot.querySelector('#resetMidiLearn');
		resetBtn.onclick = () => {
			const currentPreset = this.shadowRoot.querySelector('#selectPreset').value;
			const switchpads = this.shadowRoot.querySelectorAll('.switchpad')
			if (localStorage.sampler2Presets && PresetManager2.getMidiLearnListFromCurrentPreset(currentPreset)) {
				PresetManager2.loadMidiControllerFromCurrentPreset(currentPreset, switchpads);

				switchpads.forEach((switchpad) => {
					const index = switchpad.id.match(/\d+/g)[0];
					// if(!switchpad.querySelector('.button_midi_note')){
					const currentMidiLearn = PresetManager2.getMidiLearnFromCurrentPreset(currentPreset, switchpad.id);
					if (currentMidiLearn.cc.cc === undefined) {
						if (switchpad.querySelector('.button_midi_note')) {
							switchpad.querySelector('.button_midi_note').remove();
						}
					}
					this.setMidiNoteName(index, currentMidiLearn.cc.cc);
				}
				)
			} else {
				this.defaultMidiMapping();
			}
		};
	}

	defaultMidiMapping(manualClick) {
		const switchPads = this.shadowRoot.querySelectorAll('.switchpad');
		// !!! Set here the default root midi note for the first switchpad !!!
		const defaultRootMidiNote = 60; // 60 is C4
		let midiLearnList = [];
		const preset = this.shadowRoot.querySelector('#selectPreset').value;
		PresetManager2.setDefaultMidiMapping(preset, switchPads, defaultRootMidiNote);
		if (localStorage.sampler2Presets && !manualClick) {
			if (PresetManager2.getMidiLearnListFromCurrentPreset(preset)) {
				const midiList = PresetManager2.getMidiLearnListFromCurrentPreset(preset);
				midiList.forEach((midi) => {
					if (midi.id.includes('switchpad')) {
						this.setMidiNoteName(midi.id.match(/\d+/g)[0], midi.cc.cc);
					}
				});
			} else {
				switchPads.forEach((switchPad) => {
					// switchPad.midiController = {};
					const index = switchPad.id.match(/\d+/g)[0];
					this.setMidiNoteName(index, defaultRootMidiNote + parseInt(index));
					midiLearnList.push({ id: switchPad.id, cc: { cc: defaultRootMidiNote + parseInt(index), channel: 0 } });
					if (switchPad.midiController) {
						switchPad.midiController.channel = 0;
						switchPad.midiController.cc = defaultRootMidiNote + parseInt(index);
					}
				});
			}
		}
		else if (localStorage.WebAudioControlsMidiLearn) {
			midiLearnList = JSON.parse(localStorage.WebAudioControlsMidiLearn);
			switchPads.forEach((switchPad) => {
				const index = switchPad.id.match(/\d+/g)[0];
				this.setMidiNoteName(index, defaultRootMidiNote + parseInt(index));
				const currentMidiLearn = midiLearnList.find(element => element.id == switchPad.id);
				currentMidiLearn.cc.channel = 0;
				currentMidiLearn.cc.cc = defaultRootMidiNote + parseInt(index);
				if (switchPad.midiController) {
					switchPad.midiController.cc = currentMidiLearn.cc.cc;
					switchPad.midiController.channel = currentMidiLearn.cc.channel;
				}
			});
		} else {
			switchPads.forEach((switchPad) => {
				const index = switchPad.id.match(/\d+/g)[0];
				this.setMidiNoteName(index, defaultRootMidiNote + parseInt(index));
				midiLearnList.push({ id: switchPad.id, cc: { cc: defaultRootMidiNote + parseInt(index), channel: 0 } });
				if (switchPad.midiController) {
					switchPad.midiController.cc = defaultRootMidiNote + parseInt(index);
					switchPad.midiController.channel = 0;
				}
			});
		}
		if (midiLearnList.length > 0) {
			localStorage.setItem("WebAudioControlsMidiLearn", JSON.stringify(midiLearnList));
		}
	}

	setSwitchPadHandler(index) {
		const switchPadHandler = this.shadowRoot.querySelector('#switchpadHandler' + index);
		const buttonText = document.createElement('p');
		buttonText.innerHTML = String.fromCharCode('A'.charCodeAt(0) + index);
		buttonText.classList.add('button_text');
		buttonText.id = 'button_text' + index;
		switchPadHandler.innerHTML = '';
		switchPadHandler.appendChild(buttonText);
		switchPadHandler.onmousedown = (e) => {
			const allPads = this.shadowRoot.querySelectorAll('[id^="switchpadHandler"]');
			this.presetPage = index;
			allPads.forEach((pad, padIndex) => {
				if (padIndex !== index) {
					pad.value = 0;
				}
			});
			switchPadHandler.value = 1;
			const currentPreset = this.shadowRoot.querySelector('#selectPreset').value;
			this.tempPlayer = this.samplePlayers;
			this.loadCurrentPreset(currentPreset, null, true);
		};
	}

	setSwitchPad(index) {
		const switchPad = this.shadowRoot.querySelector('#switchpad' + index % 16);
		const preset = this.shadowRoot.querySelector('#selectPreset').value;

		const buttonText = document.createElement('p');
		if (SamplerHTMLElement2.URLs[index].includes('http') && SamplerHTMLElement2.name[index]) {
			buttonText.innerHTML = SamplerHTMLElement2.name[index];
		}

		//add p text element
		buttonText.classList.add('button_text');
		buttonText.id = 'button_text' + index;
		//buttonText.innerHTML = switchPad.textContent;
		switchPad.innerHTML = '';
		switchPad.appendChild(buttonText);
		// Add a button to delete the sample in the top right corner
		if (buttonText && buttonText.innerHTML !== "") {
			const deleteSample = document.createElement('button');
			deleteSample.classList.add('deleteSample');
			deleteSample.id = 'deleteSample' + index;
			deleteSample.innerHTML = 'X';
			deleteSample.onmousedown = (e) => {
				e.preventDefault();
				e.stopPropagation();
				if (e.button == 2) {
					e.preventDefault();
					return;
				}
				this.deleteSample(index);
			}
			switchPad.appendChild(deleteSample);
		}


		//play sample
		switchPad.onmousedown = (e) => {
			//disable right click
			if (e.button == 2) {
				e.preventDefault();
				return;
			};

			if (this.player != this.samplePlayers[index]) {
				this.player = this.samplePlayers[index];
			}

			if (!this.player) {
				return;
			}

			this.setKnobsEffects();

			// Display the name of the sample above the waveform
			this.shadowRoot.querySelector('#labelSampleName').innerHTML = switchPad.innerHTML.split('<')[0];
			this.player.drawWaveform();


			//stop the previous sound if it's playing
			this.player.stop();

			//play the sample
			this.player.play();

			// remove the class 'selected' from all the buttons
			const buttons = this.shadowRoot.querySelectorAll('.padbutton');
			buttons.forEach((button) => {
				button.classList.remove('selected');
			});

			//Remove selected class from all switchpad
			const switchPads = this.shadowRoot.querySelectorAll('.switchpad');
			switchPads.forEach((switchPad) => {
				switchPad.classList.remove('selected');
			});

			// remove the class 'selected' from all the buttons of the explorer
			const buttonsExplorer = this.shadowRoot.querySelectorAll('.resultButton');
			buttonsExplorer.forEach((button) => {
				button.classList.remove('selected');
			});

			// add 'selected' class to the pad
			switchPad.classList.add('selected');

			//we can now rename the sample
			this.setLabel(index, switchPad);


		};

		const currentPreset = this.shadowRoot.querySelector('#selectPreset').value;

		if (localStorage.WebAudioControlsMidiLearn) {
			let stockMidiLearn = localStorage.getItem("WebAudioControlsMidiLearn");
			let listMidiLearn = JSON.parse(stockMidiLearn);
			const currentMidiLearn = listMidiLearn.find(element => element.id == switchPad.id);
			this.setMidiNoteName(index % 16, currentMidiLearn.cc.cc);
			return;
		} else if (localStorage.sampler2Presets && PresetManager2.getMidiLearnListFromCurrentPreset(currentPreset)) {
			const currentMidiLearn = PresetManager2.getMidiLearnFromCurrentPreset(currentPreset, switchPad.id);
			if (currentMidiLearn === undefined) return;
			this.setMidiNoteName(index % 16, currentMidiLearn.cc.cc);
		}
	}

	setKnobsEffects(newPlayer) {
		if (newPlayer) {
			this.player = newPlayer;
		}
		// enable effects knobs
		const effectKnobs = this.shadowRoot.querySelectorAll('.knob');
		effectKnobs.forEach((effectKnob) => { effectKnob.classList.remove('element-disabled') });

		// set effects knobs to current values
		this.shadowRoot.querySelector('#knob1').value = this.player.effects.volumeGain;
		this.shadowRoot.querySelector('#knob2').value = this.player.effects.pan;
		this.shadowRoot.querySelector('#knob3').value = this.player.effects.toneValue;

		//pitch
		this.shadowRoot.querySelector('#knobPitch').value = this.player.semitones;

		const btnReverse = this.shadowRoot.querySelector('#reverse');
		btnReverse.disabled = false;
		btnReverse.classList.remove('element-disabled');

		btnReverse.value = this.player.reverseValue;
		this.player.reversed ? btnReverse.classList.add('choose') : btnReverse.classList.remove('choose');

		//adsr
		this.shadowRoot.querySelector('#knobAttack').value = this.player.effects.attackValue;
		this.shadowRoot.querySelector('#knobDecay').value = this.player.effects.decayValue;
		this.shadowRoot.querySelector('#knobSustain').value = this.player.effects.sustainValue;
		this.shadowRoot.querySelector('#knobRelease').value = this.player.effects.releaseValue;

		const envBtn = this.shadowRoot.querySelector('#envBtn');
		const envKnobs = this.shadowRoot.querySelectorAll('.knobEnv');
		envBtn.disabled = false;
		envBtn.classList.remove('element-disabled');
		envKnobs.forEach((envKnob) => { envKnob.classList.remove('element-disabled') });

		if (!this.player.enableAdsr) {
			envBtn.innerHTML = 'Enable';
			envBtn.classList.remove('choose');
			envKnobs.forEach((envKnob) => { envKnob.classList.add('element-disabled') });
		} else {
			envBtn.innerHTML = 'Disable';
			envBtn.classList.add('choose');
			envKnobs.forEach((envKnob) => { envKnob.classList.remove('element-disabled') });
		}
	}


	deleteSample(index) {
		const deleteSample = this.shadowRoot.querySelector('#deleteSample' + index);
		const b = this.shadowRoot.querySelector('#switchpad' + index);
		const midiLearnText = b.querySelector('.button_midi_note');

		// remove the click of the delete button
		b.removeChild(deleteSample);

		// Put back the value of the progress bar to 0
		const progressBar = this.shadowRoot.querySelector('#progress' + index);
		progressBar.value = 0;

		// Delete click listener
		b.onmousedown = null;

		// Stop samplePlayer
		this.samplePlayers[index].stop();

		// if the pad is the current pad selected, remove the canvas
		if (b.classList.contains('selected')) {
			this.canvasContext.clearRect(0, 0, this.canvas.width, this.canvas.height);
			this.canvasContextOverlay.clearRect(0, 0, this.canvas.width, this.canvas.height);
			this.player = null;
			this.shadowRoot.querySelector('#labelSampleName').innerHTML = 'Waveform';
		}

		// Delete the samplePlayer
		this.samplePlayers[index] = null;
		SamplerHTMLElement2.URLs[index] = '';
		SamplerHTMLElement2.name[index] = '';

		// Delete the pad
		b.innerHTML = '';
		b.classList.remove('set');
		b.classList.remove('selected');
		b.classList.remove('active');

		this.setDefaultPadKeyValue(index);
		if (midiLearnText != null) {
			b.appendChild(midiLearnText);
		}
	}


	setPreset = () => {
		const presetSelectMenu = this.shadowRoot.querySelector('#selectPreset');
		PresetManager2.buildPresetMenu(presetSelectMenu);

		//!!for testing load the blank preset first !!
		let currentPresetName = 'blank preset';
		//let currentPresetName = presetSelectMenu.value;

		this.loadCurrentPreset(currentPresetName);
		//Create Note Set
		this.createNoteSet();

		// When the preset is loaded, we load the new sounds
		presetSelectMenu.onchange = () => {
			// Stop all sounds
			this.stopAllSoundsPads();
			this.stopAllSoundsExplorer();
			// const currentPreset = PresetManager2.getPreset(presetSelectMenu.value);
			presetSelectMenu.blur();
			currentPresetName = presetSelectMenu.value;
			this.presetPage = 0;
			this.loadCurrentPreset(currentPresetName);
			const allPads = this.shadowRoot.querySelectorAll('[id^="switchpadHandler"]');
			allPads.forEach((pad, padIndex) => {
				if (padIndex !== 0) {
					pad.value = 0;
				}
				else {
					pad.value = 1;
				}
			});
			this.initKnobs();

		};
	}

	loadCurrentPreset(presetName, newDecodedSounds, samePage = false) {
		this.shadowRoot.querySelector('#selectPreset').value = presetName;

		this.plugin.audioNode.currentPreset = presetName;
		this.plugin.audioNode.gui = this;

		this.samplePlayers = [];
		if (!samePage) { this.tempPlayer = []; }
		this.player = null;
		this.canvasContext.clearRect(0, 0, this.canvas.width, this.canvas.height);
		this.canvasContextOverlay.clearRect(0, 0, this.canvas.width, this.canvas.height);

		const label = this.shadowRoot.querySelector('#labelSampleName');
		label.style.cursor = 'default';
		//reset the content of the switchpads
		const switchPads = this.shadowRoot.querySelectorAll('.switchpad');
		switchPads.forEach((switchPad) => {
			switchPad.innerHTML = '';
			switchPad.classList.remove('set');
			switchPad.classList.remove('selected');
			switchPad.classList.remove('active');
		});

		//reset Waveform sample label name
		this.shadowRoot.querySelector('#labelSampleName').innerHTML = "Waveform";

		//load current preset sounds
		this.loadSounds(presetName, newDecodedSounds);
		//delete preset button
		const deletePreset = this.shadowRoot.querySelector('#deletePreset');
		let preset;

		if (localStorage.sampler2Presets) {
			preset = PresetManager2.getCurrentPreset(presetName);
		}
		else {
			preset = PresetManager2.getFactoryPreset(presetName);
		}

			if (preset.isFactoryPresets) {
				deletePreset.innerHTML = "Reset preset";
			}
			else if (!preset.isFactoryPresets) {
				deletePreset.innerHTML = "Delete preset";
			}


		deletePreset.onclick = () => { this.deletePreset(); };

		//save preset button
		const savePreset = this.shadowRoot.querySelector('#savePreset');
		savePreset.onclick = () => { this.savePreset(); };

		//create preset button
		const createPreset = this.shadowRoot.querySelector('#createPreset');
		createPreset.onclick = () => { this.createPreset("custom preset", switchPads); };

		const noteSetBtn = this.shadowRoot.querySelector('#createNoteSet');
		noteSetBtn.disabled = true;
		noteSetBtn.classList.add('element-disabled');

	}

	loadCurrentState(currentState) {
		SamplerHTMLElement2.URLs = changePathToAbsolute(PresetManager2.getPresetUrls(currentState));
		SamplerHTMLElement2.defaultName = PresetManager2.getPresetUrlsNames(currentState);
		let bl = new BufferLoader(this.plugin.audioContext, SamplerHTMLElement2.URLs, this.shadowRoot, (bufferList) => {

			this.decodedSounds = bufferList;

			this.decodedSounds.forEach((decodedSound, index) => {

				if (decodedSound != undefined) {
					this.samplePlayers[index] = new SamplePlayer2(this.plugin.audioContext, this.canvas, this.canvasOverlay, "orange", decodedSound, this.plugin.audioNode, 0);
					if (currentState.samples[index].player) {
						SamplerHTMLElement2.name[index] = currentState.samples[index].player.name;
						SamplerHTMLElement2.defaultName[index] = currentState.samples[index].name;
						this.samplePlayers[index] = PresetManager2.loadPlayerFromCurrentPreset(this.samplePlayers[index], index, currentState);
					}
					else if (currentState) {
						SamplerHTMLElement2.name[index] = currentState.samples[index].name;
					}
					this.setSwitchPad(index);
					this.setDefaultPadKeyValue(index);
					window.requestAnimationFrame(this.handleAnimationFrame);
				}
			});
			for (let i = 0; i < 16; i++) {
				const switchPad = this.shadowRoot.querySelector('#switchpad' + i);
				switchPad.midiController = {};
			}

			//bind the midi learn into the corresponding pad
			const switchPads = this.shadowRoot.querySelectorAll('.switchpad');
			if (currentState.midiLearn) {
				const switchPadsWithMidiLearn = currentState.midiLearn.filter(element => element.cc.cc);
				switchPads.forEach((switchpad) => {
					switchpad.midiController = {};
					if (switchPadsWithMidiLearn.find(element => element.id === switchpad.id)) {
						switchpad.midiController.channel = currentState.midiLearn.find(element => element.id === switchpad.id).cc.channel;
						switchpad.midiController.cc = currentState.midiLearn.find(element => element.id === switchpad.id).cc.cc;

						this.setMidiNoteName(switchpad.id.match(/\d+/g)[0], switchpad.midiController.cc);

						localStorage.setItem("WebAudioControlsMidiLearn", JSON.stringify(currentState.midiLearn));
					}
				});
			}

		});
		bl.load();
	}

	loadSounds = (presetValue, newDecodedSounds) => {
		SamplerHTMLElement2.URLs = [];
		SamplerHTMLElement2.name = [];
		SamplerHTMLElement2.defaultName = [];
		// On remet toutes les progress bar à 0
		for (let i = 0; i < 16; i++) {
			const progressBar = this.shadowRoot.querySelector('#progress' + i);
			progressBar.value = 0;
		}

		if (localStorage.sampler2Presets) {
			// if local storage has presets item, load the selected preset saved in local storage
			const currentPreset = PresetManager2.getCurrentPreset(presetValue);

			if (currentPreset) {
				//get urls from current preset
				let currentPresetUrls = PresetManager2.getPresetUrls(currentPreset);
				const currentPresetNames = PresetManager2.getPresetUrlsNames(currentPreset);
				currentPresetUrls = changePathToAbsolute(currentPresetUrls);
				SamplerHTMLElement2.URLs = currentPresetUrls;
				SamplerHTMLElement2.defaultName = currentPresetNames;
			}
			let bl = new BufferLoader(this.plugin.audioContext, SamplerHTMLElement2.URLs, this.shadowRoot, (bufferList) => {
				if (newDecodedSounds) { this.decodedSounds = newDecodedSounds }
				else { this.decodedSounds = bufferList }

				this.decodedSounds.forEach((decodedSound, index) => {
					if (decodedSound != undefined) {
						this.samplePlayers[index] = new SamplePlayer2(this.plugin.audioContext, this.canvas, this.canvasOverlay, "orange", decodedSound, this.plugin.audioNode, 0);
						if (currentPreset.samples[index].player) {
							SamplerHTMLElement2.name[index] = currentPreset.samples[index].player.name;
							SamplerHTMLElement2.defaultName[index] = currentPreset.samples[index].name;
							this.samplePlayers[index] = PresetManager2.loadPlayerFromCurrentPreset(this.samplePlayers[index], index, currentPreset);
							// this.samplePlayers[index].reversed = currentPreset.samples[index].player.reversed;
						}
						else if (currentPreset) {
							SamplerHTMLElement2.name[index] = currentPreset.samples[index].name;
						}
						this.setSwitchPad(index);
						this.setDefaultPadKeyValue(index);
						window.requestAnimationFrame(this.handleAnimationFrame);
					}
				});
				for (let i = 0; i < 16; i++) {
					const switchPad = this.shadowRoot.querySelector('#switchpad' + i);
					switchPad.midiController = {};
				}
				const switchPads = this.shadowRoot.querySelectorAll('.switchpad');
				//if current preset has midi learn, load midi learn from current preset, else load default midi mapping
				if (localStorage.sampler2Presets && PresetManager2.getMidiLearnListFromCurrentPreset(currentPreset)) {
					PresetManager2.loadMidiControllerFromCurrentPreset(currentPreset, switchPads);
					switchPads.forEach((switchPad) => {
						const index = switchPad.id.match(/\d+/g)[0];
						const currentMidiLearn = PresetManager2.getMidiLearnFromCurrentPreset(currentPreset, switchPad.id);
						if (currentMidiLearn.cc.cc === undefined) {
							if (switchPad.querySelector('.button_midi_note')) {
								switchPad.querySelector('.button_midi_note').remove();
							}
						}
						this.setMidiNoteName(index, currentMidiLearn.cc.cc);
					});
				}
				else {
					this.defaultMidiMapping();
				}
			});
			bl.load();
		}
		// if local Storage doesn't have presets item, load the selected preset from factory presets
		if (!localStorage.getItem("sampler2Presets")) {
			if (presetValue.name) {
				presetValue = presetValue.name;
			}
			const currentPreset = PresetManager2.getCurrentPreset(presetValue);
			SamplerHTMLElement2.URLs = PresetManager2.getPresetUrls(currentPreset);
			SamplerHTMLElement2.URLs = changePathToAbsolute(SamplerHTMLElement2.URLs);
			SamplerHTMLElement2.name = PresetManager2.getPresetUrlsNames(currentPreset);
			SamplerHTMLElement2.defaultName = PresetManager2.getPresetUrlsNames(PresetManager2.getCurrentFactoryPreset(presetValue));
			// on charge les sons par défaut
			let bl = new BufferLoader(this.plugin.audioContext, SamplerHTMLElement2.URLs, this.shadowRoot, (bufferList) => {
				// on a chargé les sons, on stocke sous forme de tableau
				this.decodedSounds = bufferList;
				// Pour chaque son on créé un SamplePlayer
				this.decodedSounds.forEach((decodedSound, index) => {
					// Si bufferList est vide on passe au suivant
					if (decodedSound != undefined) {
						this.samplePlayers[index] = new SamplePlayer2(this.plugin.audioContext, this.canvas, this.canvasOverlay, "orange", decodedSound, this.plugin.audioNode, 0);
						if (this.tempPlayer.length > 0) {
							this.samplePlayers[index] = this.tempPlayer[index];
						}
						if (index >= this.presetPage * 16 && index < 16 + this.presetPage * 16) {
							this.setSwitchPad(index); this.setDefaultPadKeyValue(index);
						}
						window.requestAnimationFrame(this.handleAnimationFrame);
					}
				});
				for (let i = 0; i < 16; i++) {
					const switchPad = this.shadowRoot.querySelector('#switchpad' + i);
					switchPad.midiController = {};
				}
				this.defaultMidiMapping();
			});
			for (let i = 0; i <= 16 + 16 * this.presetPage - SamplerHTMLElement2.URLs.length; i++) {
				const switchPad = this.shadowRoot.querySelector('#switchpad' + i);
				if (switchPad) {
					switchPad.onmousedown = null;
				}
			}

			if (window.WAMExtensions && window.WAMExtensions.notes && window.WAMExtensions.patterns) {
				let names = SamplerHTMLElement2.name.slice(this.presetPage * 16, 16 + this.presetPage * 16);
				let notes = names.map((name, index) => ({
					blackKey: false,
					name: name,
					number: 60 + index
				}));
				window.WAMExtensions.notes.setNoteList(this.plugin.instanceId, notes);
			}
			bl.load();
			if (!newDecodedSounds) this.defaultMidiMapping();
		}
		this.defaultMidiMapping();
		this.setDefaultPadsKeyValue();
	}

	promptUser = async () => {
		if (!this.shadowRoot.querySelector('html-prompt')) {

			const resultExplorerPads = this.shadowRoot.querySelectorAll('.resultExplorer');
			//hide all resultExplorerPads
			resultExplorerPads.forEach((resultExplorerPad) => {
				resultExplorerPad.style.display = "none";
			});


			let promptElement = document.createElement('html-prompt');
			this.shadowRoot.querySelector("#results").append(promptElement);

			//display explorer choice and hide the others
			const knob = this.shadowRoot.querySelector('#choiceKnobs');
			const explorer = this.shadowRoot.querySelector('#choiceExplorer');
			const MIDI = this.shadowRoot.querySelector('#choiceMIDI');

			const divKnob = this.shadowRoot.querySelector('#knobs');
			const divExplorer = this.shadowRoot.querySelector('#explorer');
			const divMIDI = this.shadowRoot.querySelector('#MIDI');

			explorer.classList.add('choose');

			divKnob.style.display = 'none';
			divExplorer.style.display = 'inline-block';
			divMIDI.style.display = 'none';

			knob.classList.remove('choose');
			explorer.classList.add('choose');
			MIDI.classList.remove('choose');

			promptElement.addEventListener('focus', (e) => {
				this.enableKeyboard = false;
			})
			promptElement.addEventListener('promptClosed', (e) => {
				this.enableKeyboard = true;
				this.shadowRoot.querySelector('#sampler').focus();
			});
			const response = await promptElement.showPrompt("Enter preset name!");

			resultExplorerPads.forEach((resultExplorerPad) => {
				resultExplorerPad.style.display = "inline-block";
			});
			return response;
		}
	}

	createNoteSet = () => {
		const noteSetBtn = this.shadowRoot.querySelector('#createNoteSet');
		const selectMenuScale = this.shadowRoot.querySelector('#selectNoteSet');
		const switchPads = this.shadowRoot.querySelectorAll('.switchpad');

		NoteSet2.buildScaleMenu(selectMenuScale);

		if ((!this.player) || (selectMenuScale.value === "")) {
			noteSetBtn.disabled = true;
			noteSetBtn.classList.add('element-disabled');
		}
		selectMenuScale.onchange = () => {
			if (selectMenuScale.value === "") {
				noteSetBtn.disabled = true;
			} else {
				if (this.player) {
					noteSetBtn.disabled = false;
					noteSetBtn.classList.remove('element-disabled');
				}
			}
		};

		switchPads.forEach((switchPad) => {
			switchPad.onclick = () => {
				if (selectMenuScale.value !== "") {
					noteSetBtn.disabled = false;
					noteSetBtn.classList.remove('element-disabled');
				}
			};
		});


		noteSetBtn.onclick = async () => {
			if (!this.player) { return };
			const currentPlayer = this.player;

			if (selectMenuScale.value === "") return;

			const switchPads = this.shadowRoot.querySelectorAll('.switchpad');
			let presetName;

			if (this.promptAvailable) {
				presetName = prompt("Preset name :");

				let stopExecution = false;

				if (presetName === "") {
					alert("Error : preset name can't be empty");
					stopExecution = true;
					return;
				}
				// if the preset name already exists, we ask the user if he wants to overwrite it
				else if (PresetManager2.getCurrentPreset(presetName)) {
					// alert("Error : this preset name already exists");
					if (!confirm("This preset name already exists. Do you want to overwrite it ?")) {
						stopExecution = true;
						return;
					} else {
						PresetManager2.removePreset(presetName);
					}
				}
				else if (presetName === null) {
					// Si l'utilisateur annule la saisie
					stopExecution = true;
					return;
				}

				if (stopExecution) { return };
			}
			else {
				const response = await this.promptUser();
				if (response === "" || !response) return;
				if (PresetManager2.getCurrentPreset(response)) PresetManager2.removePreset(response);
				presetName = response;
			}

			//change the index of the player in the samplePlayers array
			const playerIndex = this.samplePlayers.indexOf(currentPlayer);

			this.swapSample(playerIndex, 7);
			const fundamentalIndex = 7;

			this.samplePlayers.forEach((player, index) => {
				if (player && player !== currentPlayer) {
					//clean samplePlayer
					this.deleteSample(index);
				}
			});

			let namePlayer = SamplerHTMLElement2.name[fundamentalIndex];
			let rootNoteName;
			if (namePlayer.match(/(?:^|\s)([A-G][#b]?[0-9]?)(?=\s|$)/)) {
				rootNoteName = namePlayer.match(/(?:^|\s)([A-G][#b]?[0-9]?)(?=\s|$)/)[0];
				//delete space
				rootNoteName = rootNoteName.replace(/\s/g, '');
				//By default the octave is 4
				if (!rootNoteName.match(/[0-9]/)) {
					const octave = '4';
					SamplerHTMLElement2.name[fundamentalIndex] = SamplerHTMLElement2.name[fundamentalIndex] + octave;
				}
			} else {
				//By default the root note is C4
				rootNoteName = 'C4';
				namePlayer = namePlayer + ' ' + rootNoteName;
				SamplerHTMLElement2.name[fundamentalIndex] = namePlayer;
			}

			const scales = NoteSet2.getScales();

			const currentScale = scales.find(scale => scale.name === selectMenuScale.value);
			if (!currentScale) return;

			const ascendingNotesSemitones = currentScale.notes.ascending.map(note => note.semitones);
			const descendingNotesSemitones = currentScale.notes.descending.map(note => note.semitones);

			const newNamesScale = NoteSet2.changeScaleNoteName(ascendingNotesSemitones, descendingNotesSemitones, rootNoteName);
			this.setNoteValue(fundamentalIndex, newNamesScale.ascending[0]);

			//if the root player is pitched, we need to pitch the new players
			const newPlayer = new SamplePlayer2(this.plugin.audioContext, this.canvas, this.canvasOverlay, "orange", currentPlayer.newDecodedSound, this.plugin.audioNode, currentPlayer.semitones);
			newPlayer.decodedSound = newPlayer.newDecodedSound;
			newPlayer.semitones = 0;
			this.setKnobsEffects(newPlayer);
			this.samplePlayers[fundamentalIndex] = newPlayer;
			this.samplePlayers[fundamentalIndex] = NoteSet2.setEffectsSamplePlayer(this.samplePlayers[fundamentalIndex], currentPlayer);


			let indexAscending = 1;
			for (let i = fundamentalIndex + 1; i < switchPads.length; i++) {
				this.samplePlayers[i] = new SamplePlayer2(this.plugin.audioContext, this.canvas, this.canvasOverlay, "orange", newPlayer.newDecodedSound, this.plugin.audioNode, 0);
				SamplerHTMLElement2.name[i] = namePlayer.replace(rootNoteName, newNamesScale.ascending[indexAscending]);
				SamplerHTMLElement2.defaultName[i] = SamplerHTMLElement2.defaultName[fundamentalIndex];
				SamplerHTMLElement2.URLs[i] = SamplerHTMLElement2.URLs[fundamentalIndex];

				this.samplePlayers[i] = NoteSet2.setEffectsSamplePlayer(this.samplePlayers[i], currentPlayer);

				this.samplePlayers[i].semitones = ascendingNotesSemitones[indexAscending];
				this.setSwitchPad(i);
				this.setNoteValue(i, newNamesScale.ascending[indexAscending]);
				indexAscending++;
			}

			let indexDescending = 1;
			for (let i = fundamentalIndex - 1; i >= 0; i--) {
				this.samplePlayers[i] = new SamplePlayer2(this.plugin.audioContext, this.canvas, this.canvasOverlay, "orange", newPlayer.newDecodedSound, this.plugin.audioNode, 0);
				SamplerHTMLElement2.name[i] = namePlayer.replace(rootNoteName, newNamesScale.descending[indexDescending]);
				SamplerHTMLElement2.defaultName[i] = SamplerHTMLElement2.defaultName[fundamentalIndex];
				SamplerHTMLElement2.URLs[i] = SamplerHTMLElement2.URLs[fundamentalIndex];

				this.samplePlayers[i] = NoteSet2.setEffectsSamplePlayer(this.samplePlayers[i], currentPlayer);

				this.samplePlayers[i].semitones = descendingNotesSemitones[indexDescending];
				this.setSwitchPad(i);
				this.setNoteValue(i, newNamesScale.descending[indexDescending]);
				indexDescending++;
			}

			this.setDefaultPadsKeyValue();

			PresetManager2.createPreset(presetName, 'noteSet', this.samplePlayers, SamplerHTMLElement2, switchPads);
			PresetManager2.saveAllPresets();
			const presetSelectMenu = this.shadowRoot.querySelector('#selectPreset');
			PresetManager2.buildPresetMenu(presetSelectMenu);

			/*
			const newDecodedSounds = [];
			this.samplePlayers.forEach((player, index) => {
				if (player) {
					newDecodedSounds[index] = player.decodedSound;
				}
			});
			this.loadCurrentPreset(presetName, newDecodedSounds);
			*/

			this.shadowRoot.querySelector('#selectPreset').value = presetName;
		}
	}


	createPreset = async (type, switchPads) => {
		this.initKnobs();
		let presetName;

		if (this.promptAvailable) {
			// Get the preset name
			presetName = prompt("Preset name :");

			//if the preset name is empty, we stop the execution
			if (presetName === "") {
				alert("Error : preset name can't be empty");
				return;
			}
			// If the preset name already exists, we ask the user if he wants to overwrite it
			else if (PresetManager2.getCurrentPreset(presetName)) {
				// alert("Error : this preset name already exists");
				if (confirm("This preset name already exists. Do you want to overwrite it ?")) {
					PresetManager2.removePreset(presetName);
					PresetManager2.createPreset(presetName, type, this.samplePlayers, SamplerHTMLElement2, switchPads);
					PresetManager2.saveAllPresets();
					return;
				}
				else return;
			}
			else if (presetName === null) {
				// If the user cancels the input
				return;
			}
			else {
				PresetManager2.createPreset(presetName, type, this.samplePlayers, SamplerHTMLElement2, switchPads);
				PresetManager2.saveAllPresets();
			}
		} else {
			const response = await this.promptUser();
			if (response === "") return;
			if (PresetManager2.getCurrentPreset(response)) PresetManager2.removePreset(response);
			presetName = response;
			PresetManager2.createPreset(presetName, type, this.samplePlayers, SamplerHTMLElement2, switchPads);
			PresetManager2.saveAllPresets();
		}

		const presetSelectMenu = this.shadowRoot.querySelector('#selectPreset');
		PresetManager2.buildPresetMenu(presetSelectMenu);

		this.loadCurrentPreset(presetName);
		this.shadowRoot.querySelector('#selectPreset').value = presetName;

	}

	savePreset = () => {
		this.initKnobs();
		const preset = this.shadowRoot.querySelector('#selectPreset');
		const presetName = preset.value;
		PresetManager2.savePresets(presetName, this.samplePlayers, SamplerHTMLElement2);

		this.loadCurrentPreset(presetName);


	}

	getCurrentState = (presetName, samplePlayers) => {
		this.plugin.audioNode.currentPreset = presetName;
		this.plugin.audioNode.gui = this;
		const currentState = structuredClone(PresetManager2.getCurrentPreset(presetName));

		currentState.samples = PresetManager2.newSamples(SamplerHTMLElement2.URLs, SamplerHTMLElement2.name, SamplerHTMLElement2.defaultName, samplePlayers);
		currentState.midiLearn = PresetManager2.getMidiPresetsFromLocalStorage();
		return currentState;
	}

	deletePreset = () => {
		this.initKnobs();
		this.stopAllSoundsPads();
		this.stopAllSoundsExplorer();
		const preset = this.shadowRoot.querySelector('#selectPreset').value;
		const presetSelectMenu = this.shadowRoot.querySelector('#selectPreset');
		const switchPads = this.shadowRoot.querySelectorAll('.switchpad');

		if (PresetManager2.isFactoryPreset(preset)) {
			PresetManager2.resetPreset(preset);
			this.loadCurrentPreset(preset);
		} else {
			PresetManager2.removePreset(preset);
			PresetManager2.resetAllMidiLearning();


			PresetManager2.buildPresetMenu(presetSelectMenu);

			this.loadCurrentPreset(presetSelectMenu.value);
		}

	}

	noteOnKey = (padbutton) => {
		const numberRegex = /\d+/g;
		const padIndex = +padbutton.id.match(numberRegex)[0];

		//call setValue method from webaudio-controls to change the Gui when key is pressed
		if (padbutton.nodeName === 'WEBAUDIO-SWITCH2') padbutton.setValue(1);

		this.player = this.samplePlayers[padIndex];
		if (!this.player) return;

		this.shadowRoot.querySelector('#labelSampleName').innerHTML = padbutton.innerHTML.split('<')[0];

		this.setKnobsEffects();

		this.player.drawWaveform();

		this.player.stop();
		this.player.play();

		const buttons = this.shadowRoot.querySelectorAll('.switchpad');
		buttons.forEach((button) => {
			button.classList.remove('selected');
		});

		const buttonsExplorer = this.shadowRoot.querySelectorAll('.resultButton');
		buttonsExplorer.forEach((button) => {
			button.classList.remove('selected');
		});

		padbutton.classList.add('selected');

		this.setLabel(padIndex, padbutton);


	}

	noteOffKey = (padbutton) => {

		//call setValue method from webaudio-controls to change the Gui when key is up
		if (padbutton.nodeName === 'WEBAUDIO-SWITCH2') padbutton.setValue(0);

		const numberRegex = /\d+/g;
		const padIndex = +padbutton.id.match(numberRegex)[0];
		if (!padbutton) return;
		padbutton.classList.remove('active');
		this.player = this.samplePlayers[padIndex];
		if (!this.player) return;
		if (this.player.enableAdsr) {
			this.player.releaseEnv();
		};
	}

	setKeyboardPress() {
		const enableKeysBtn = this.shadowRoot.querySelector('#enableKeyboard');
		let localEnableKeyboard = false;
		enableKeysBtn.addEventListener('click', (e) => {
			if (localEnableKeyboard) {
				localEnableKeyboard = false;
				enableKeysBtn.textContent = "Keyboard OFF"
				enableKeysBtn.classList.remove('choose');
			} else {
				localEnableKeyboard = true;
				enableKeysBtn.textContent = "Keyboard ON"
				enableKeysBtn.classList.add('choose');
			}
		});
		this.shadowRoot.addEventListener('keydown', (e) => {
			if (!this.enableKeyboard || !localEnableKeyboard) return;
			//cancel the event if it's a repeat -> sample playing in loop
			if (e.repeat) {
				e.preventDefault();
				return;
			}
			switch (e.code) {
				case 'Digit1':
					this.noteOnKey(this.shadowRoot.querySelector('#switchpad12'));
					break;
				case 'Digit2':
					this.noteOnKey(this.shadowRoot.querySelector('#switchpad13'));
					break;
				case 'Digit3':
					this.noteOnKey(this.shadowRoot.querySelector('#switchpad14'));
					break;
				case 'Digit4':
					this.noteOnKey(this.shadowRoot.querySelector('#switchpad15'));
					break;
				case 'KeyQ':
					this.noteOnKey(this.shadowRoot.querySelector('#switchpad8'));
					break;
				case 'KeyW':
					this.noteOnKey(this.shadowRoot.querySelector('#switchpad9'));
					break;
				case 'KeyE':
					this.noteOnKey(this.shadowRoot.querySelector('#switchpad10'));
					break;
				case 'KeyR':
					this.noteOnKey(this.shadowRoot.querySelector('#switchpad11'));
					break;
				case 'KeyA':
					this.noteOnKey(this.shadowRoot.querySelector('#switchpad4'));
					break;
				case 'KeyS':
					this.noteOnKey(this.shadowRoot.querySelector('#switchpad5'));
					break;
				case 'KeyD':
					this.noteOnKey(this.shadowRoot.querySelector('#switchpad6'));
					break;
				case 'KeyF':
					this.noteOnKey(this.shadowRoot.querySelector('#switchpad7'));
					break;
				case 'KeyZ':
					this.noteOnKey(this.shadowRoot.querySelector('#switchpad0'));
					break;
				case 'KeyX':
					this.noteOnKey(this.shadowRoot.querySelector('#switchpad1'));
					break;
				case 'KeyC':
					this.noteOnKey(this.shadowRoot.querySelector('#switchpad2'));
					break;
				case 'KeyV':
					this.noteOnKey(this.shadowRoot.querySelector('#switchpad3'));
					break;
			}
		});

		this.shadowRoot.addEventListener('keyup', (e) => {
			switch (e.code) {
				case 'Digit1':
					this.noteOffKey(this.shadowRoot.querySelector('#switchpad12'));
					break;
				case 'Digit2':
					this.noteOffKey(this.shadowRoot.querySelector('#switchpad13'));
					break;
				case 'Digit3':
					this.noteOffKey(this.shadowRoot.querySelector('#switchpad14'));
					break;
				case 'Digit4':
					this.noteOffKey(this.shadowRoot.querySelector('#switchpad15'));
					break;
				case 'KeyQ':
					this.noteOffKey(this.shadowRoot.querySelector('#switchpad8'));
					break;
				case 'KeyW':
					this.noteOffKey(this.shadowRoot.querySelector('#switchpad9'));
					break;
				case 'KeyE':
					this.noteOffKey(this.shadowRoot.querySelector('#switchpad10'));
					break;
				case 'KeyR':
					this.noteOffKey(this.shadowRoot.querySelector('#switchpad11'));
					break;
				case 'KeyA':
					this.noteOffKey(this.shadowRoot.querySelector('#switchpad4'));
					break;
				case 'KeyS':
					this.noteOffKey(this.shadowRoot.querySelector('#switchpad5'));
					break;
				case 'KeyD':
					this.noteOffKey(this.shadowRoot.querySelector('#switchpad6'));
					break;
				case 'KeyF':
					this.noteOffKey(this.shadowRoot.querySelector('#switchpad7'));
					break;
				case 'KeyZ':
					this.noteOffKey(this.shadowRoot.querySelector('#switchpad0'));
					break;
				case 'KeyX':
					this.noteOffKey(this.shadowRoot.querySelector('#switchpad1'));
					break;
				case 'KeyC':
					this.noteOffKey(this.shadowRoot.querySelector('#switchpad2'));
					break;
				case 'KeyV':
					this.noteOffKey(this.shadowRoot.querySelector('#switchpad3'));
					break;
			}
		});
	}

	setVelocity() {
		const velocityBtn = this.shadowRoot.querySelector('#enableVelocity');
		velocityBtn.onclick = () => {
			if (!this.enableVelocity) {
				velocityBtn.classList.add('choose');
				velocityBtn.innerHTML = 'Velocity ON';
				this.enableVelocity = true;
			} else {
				velocityBtn.classList.remove('choose');
				velocityBtn.innerHTML = 'Velocity OFF';
				this.enableVelocity = false;
			}
		};
	}

	setupMidiListeners(audioNode) {
		console.log("setupMIDIEvents called at " + Date.now());
		const wamNode = audioNode._wamNode;
		wamNode.addEventListener('wam-midi', (e) => this.processMIDIEvents([{ event: e.detail.data.bytes, time: 0 }]));
	}

	processMIDIEvents(midiEvents, enableVelocity) {
		// console.log("processMIDIEvents called at " + Date.now());
		// console.log("midiEvents:", midiEvents);
		midiEvents.forEach(message => {
			if (message.event[0] === MIDI.NOTE_ON && message.event[2] !== 0) {
				let midiNote = message.event[1]
				let velocity = message.event[2];
				this.updateMidiNoteValue(midiNote);
				this.noteOn(midiNote, message.time, velocity);
				//if midi controller has no noteOff
				// if (velocity > 0) this.noteOn(midiNote, message.time)
				// else this.noteOff(midiNote, message.time)
			} else if (message.event[0] === MIDI.NOTE_OFF || (message.event[0] === MIDI.NOTE_ON && message.event[2] === 0)) { // NOTE_ON avec velocity 0 = NOTE_OFF
				let midiNote = message.event[1]
				this.noteOff(midiNote, message.time)
			} else if (message.event[0] >= MIDI.CC && message.event[0] < MIDI.CC + 16) {
				let controlId = message.event[0];
				let ccValue = message.event[2];
				this.controlChange(controlId, ccValue)
			}
		});
	}

	controlChange(controlId, ccValue) {
		if (!this.player) return;
		const samplePlayer = this.player;
		// console.log("controlChange", controlId, ccValue)

		if (controlId == this.controlBindings.get('volume')) {
			samplePlayer.effects.volumeGain = parseFloat(ccValue / 127);
			this.shadowRoot.querySelector('#knob1').value = parseFloat(ccValue / 127);
		}
		if (controlId == this.controlBindings.get('pan')) {
			samplePlayer.effects.pan = parseFloat((ccValue / 127) * 2 - 1);
			this.shadowRoot.querySelector('#knob2').value = parseFloat((ccValue / 127) * 2 - 1);
		}

		if (controlId == this.controlBindings.get('tone')) {
			samplePlayer.effects.tone = parseFloat((ccValue / 127) * 2 - 1);
			this.shadowRoot.querySelector('#knob3').value = parseFloat((ccValue / 127) * 2 - 1);
		}

		if (controlId == this.controlBindings.get('pitch')) {
			samplePlayer.semitones = parseInt(((ccValue / 127) * 2 - 1) * 24);
			this.shadowRoot.querySelector('#knobPitch').value = parseInt(((ccValue / 127) * 2 - 1) * 24);
		}

		//adsr
		if (controlId == this.controlBindings.get('attack')) {
			samplePlayer.effects.attackValue = parseFloat((ccValue / 127) * 2);
			this.shadowRoot.querySelector('#knobAttack').value = parseFloat((ccValue / 127)) * 2;
		}

		if (controlId == this.controlBindings.get('decay')) {
			samplePlayer.effects.decayValue = parseFloat((ccValue / 127));
			this.shadowRoot.querySelector('#knobDecay').value = parseFloat((ccValue / 127));
		}

		if (controlId == this.controlBindings.get('sustain')) {
			samplePlayer.effects.sustainValue = parseFloat((ccValue / 127));
			this.shadowRoot.querySelector('#knobSustain').value = parseFloat((ccValue / 127));
		}

		if (controlId == this.controlBindings.get('release')) {
			samplePlayer.effects.releaseValue = parseFloat((ccValue / 127) * 2);
			this.shadowRoot.querySelector('#knobRelease').value = parseFloat((ccValue / 127)) * 2;
		}
	}




	noteOn(note, tickStartTime, velocity) {
		// console.log("noteOn", note, tickStartTime)
		const presetValue = this.shadowRoot.querySelector('#selectPreset').value;
		let currentPad;
		let padIndex;

		const numberRegex = /\d+/g;
		if (localStorage.getItem("WebAudioControlsMidiLearn")) {
			//get current midi learn binding from local storage
			let stockMidiLearn = localStorage.getItem("WebAudioControlsMidiLearn");
			let listMidiLearn = JSON.parse(stockMidiLearn);
			// get the pad corresponding to the note passed in parameter
			currentPad = listMidiLearn.find(pad => pad.cc.cc === note);

			if (!currentPad) return;

			padIndex = +currentPad.id.match(numberRegex)[0];
			this.setMidiNoteName(padIndex, note);
		}

		//if local storage is empty
		else {
			const switchpads = this.shadowRoot.querySelectorAll('webaudio-switch2');
			switchpads.forEach((pad) => {
				if (pad.midiController.cc === note) {
					currentPad = pad;
				}
			});
			if (currentPad === undefined) return;
			// filter the number in the id of the pad
			padIndex = +currentPad.id.match(numberRegex)[0];
		}


		const padbutton = this.shadowRoot.querySelector('#switchpad' + padIndex);
		if (padbutton.nodeName === 'WEBAUDIO-SWITCH2') padbutton.value = 1;

		this.player = this.samplePlayers[padIndex + 16 * this.presetPage];

		// if the player doesn't exist, we stop the function
		if (!this.player) return;

		//Display the current pad name over the waveform
		const currentSwitchPad = this.shadowRoot.querySelector("#switchpad" + padIndex);

		// console.log(currentSwitchPad.midiController);

		const switchPadName = currentSwitchPad.querySelector("p").innerHTML;
		this.shadowRoot.querySelector('#labelSampleName').innerHTML = switchPadName;

		this.setKnobsEffects();

		//if velocity is On
		if (this.enableVelocity) {
			//set velocity to volumeGain
			this.player.effects.volumeGain = parseFloat(velocity / 127);
			this.shadowRoot.querySelector('#knob1').value = parseFloat(velocity / 127);
		} else {
			this.shadowRoot.querySelector('#knob1').value = 0.5;
		}

		this.player.drawWaveform();

		this.player.stop();
		this.player.play();

		//remove selected class from all switchpads
		const switchPads = this.shadowRoot.querySelectorAll('.switchpad');
		switchPads.forEach((switchPad) => {
			switchPad.classList.remove('selected');
		});

		//add selected class to the current switchpad played
		currentSwitchPad.classList.add('selected');

		// On enleve la class .selected de tous les button de l'explorer
		const buttonsExplorer = this.shadowRoot.querySelectorAll('.resultButton');
		buttonsExplorer.forEach((button) => {
			button.classList.remove('selected');
		});


		//now we can rename the pad
		this.setLabel(padIndex, currentSwitchPad);


	}

	noteOff(note, tickStartTime) {

		if (!localStorage.getItem("WebAudioControlsMidiLearn")) return;
		//get current midi learn binding from local storage
		let stockMidiLearn = localStorage.getItem("WebAudioControlsMidiLearn");
		let listMidiLearn = JSON.parse(stockMidiLearn);

		// get the pad corresponding to the note passed in parameter
		let currentPad = listMidiLearn.find(pad => pad.cc.cc === note);

		if (!currentPad) return;

		// filter the number in the id of the pad
		const numberRegex = /\d+/g;
		const padIndex = +currentPad.id.match(numberRegex)[0];

		const padbutton = this.shadowRoot.querySelector('#switchpad' + padIndex);
		if (padbutton.nodeName === 'WEBAUDIO-SWITCH2') padbutton.value = 0;

		if (!this.shadowRoot.querySelector('#switchpad' + padIndex)) return;
		this.shadowRoot.querySelector('#switchpad' + padIndex).classList.remove('active');
		this.player = this.samplePlayers[padIndex + 16 * this.presetPage];
		if ((!this.player) || (!this.player.enableAdsr)) { return };
		if (this.player.enableAdsr) this.player.releaseEnv();
	}

	// name of the custom HTML element associated
	// with the plugin. Will appear in the DOM if
	// the plugin is visible
	static is() {
		return 'sampler2-html-element-without-builder';
	}

}

if (!customElements.get(SamplerHTMLElement2.is())) {
	customElements.define(SamplerHTMLElement2.is(), SamplerHTMLElement2);
}